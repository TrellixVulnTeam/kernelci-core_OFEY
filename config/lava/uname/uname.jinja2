- test:
    timeout:
      minutes: 1
    definitions:
    - repository:
        metadata:
          format: Lava-Test Test Definition 1.0
          name: {{ plan }}
          description: "uname"
          os:
          - debian
          scope:
          - functional
        run:
          steps:
          - apt update
          - apt install -y wget gcc
          - wget https://raw.githubusercontent.com/kernelci/kernelci-core/how-to/config/lava/uname/uname-os.c
          - gcc -o uname-os uname-os.c
          - lava-test-case uname-os-shell --shell '[ $(uname -o) = "GNU/Linux" ]'
          - lava-test-case uname-os-c --shell './uname-os'
      from: inline
      name: {{ plan }}
      path: inline/{{ plan }}.yaml
      lava-signal: kmsg
